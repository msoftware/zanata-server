<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:composite="http://java.sun.com/jsf/composite"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:s="http://jboss.org/schema/seam/taglib"
  xmlns:f="http://java.sun.com/jsf/core">

<composite:interface>
  <composite:attribute name="statistic"
    type="org.zanata.common.statistic.WordsStatistic"/>
</composite:interface>
<composite:implementation>

  <ui:param name="approved" value="#{cc.attrs.statistic.approved}"/>
  <ui:param name="translated" value="#{cc.attrs.statistic.translated}"/>
  <ui:param name="draft" value="#{cc.attrs.statistic.draft}"/>
  <ui:param name="untranslated" value="#{cc.attrs.statistic.untranslated}"/>

  <ui:param name="total" value="#{cc.attrs.statistic.total}"/>

  <ui:param name="wApproved"
    value="#{total == 0 ? 0 : 110 * approved / total}"/>
  <ui:param name="wTranslated"
    value="#{total == 0 ? 0 : 110 * translated / total}"/>
  <ui:param name="wDraft" value="#{total == 0 ? 0 : 110 * draft / total}"/>
  <ui:param name="wUntranslated"
    value="#{total == 0 ? 0 : 110 * untranslated / total}"/>

  <s:fragment rendered="#{total > 0}">
    <div
      title="#{messages['jsf.stats.Total']} #{total}, #{messages['jsf.stats.Approved']} #{approved}, #{messages['jsf.stats.Translated']} #{translated}, #{messages['jsf.stats.Draft']} #{draft}, #{messages['jsf.stats.Untranslated']} #{untranslated}"
      class="translationStatusDiv">
      <div class="translationStatusBar statusBar_approved"
        style="width:#{wApproved}px;"></div>
      <div class="translationStatusBar statusBar_translated"
        style="width:#{wTranslated}px;"></div>
      <div class="translationStatusBar statusBar_draft"
        style="width:#{wDraft}px;"></div>
      <div class="translationStatusBar statusBar_untranslated"
        style="width:#{wUntranslated}px;"></div>

        <span class="statusBar_percentage">
          <h:outputText value="#{cc.attrs.statistic.percentTranslated/100}"
            rendered="#{total > 0}">
            <f:convertNumber type="percent"/>
          </h:outputText>
          (
          <h:outputText value="#{cc.attrs.statistic.remainingHours}">
            <f:convertNumber maxFractionDigits="1"/>
          </h:outputText>#{messages['jsf.stats.ShortHoursSuffix']}
          )
        </span>
    </div>
  </s:fragment>

  <s:fragment rendered="#{total eq 0}">
    <div class="statusBar_noContent">
      <h:outputText value="#{messages['jsf.NoContent']}"/>
    </div>
  </s:fragment>
</composite:implementation>
</html>
